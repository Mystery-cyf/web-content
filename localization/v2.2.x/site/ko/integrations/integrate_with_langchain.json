{"codeList":["! python -m pip install --upgrade pymilvus langchain openai tiktoken\n","from os import environ\n\nMILVUS_HOST = \"localhost\"\nMILVUS_PORT = \"19530\"\nOPENAI_API_KEY = \"sk-******\" # example: \"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n\n## Set up environment variables\nenviron[\"OPENAI_API_KEY\"] = OPENAI_API_KEY\n","from langchain.embeddings.openai import OpenAIEmbeddings\nfrom langchain.vectorstores import Milvus\nfrom langchain.document_loaders import WebBaseLoader\nfrom langchain.text_splitter import CharacterTextSplitter\n\n# Use the WebBaseLoader to load specified web pages into documents\nloader = WebBaseLoader([\n    \"https://milvus.io/docs/overview.md\",\n])\n\ndocs = loader.load()\n\n# Split the documents into smaller chunks\ntext_splitter = CharacterTextSplitter(chunk_size=1024, chunk_overlap=0)\ndocs = text_splitter.split_documents(docs)\n","Created a chunk of size 1745, which is longer than the specified 1024\nCreated a chunk of size 1278, which is longer than the specified 1024\n","# Set up an embedding model to covert document chunks into vector embeddings.\nembeddings = OpenAIEmbeddings(model=\"ada\")\n\n# Set up a vector store used to save the vector embeddings. Here we use Milvus as the vector store.\nvector_store = Milvus.from_documents(\n    docs,\n    embedding=embeddings,\n    connection_args={\"host\": MILVUS_HOST, \"port\": MILVUS_PORT}\n)\n","query = \"What is milvus?\"\ndocs = vector_store.similarity_search(query)\n\nprint(docs)\n","[Document(page_content='Milvus workflow.', metadata={'source': 'https://milvus.io/docs/overview.md', 'title': 'Introduction Milvus documentation', 'description': 'Milvus is an open-source vector database designed specifically for AI application development, embeddings similarity search, and MLOps v2.2.x.', 'language': 'en'}), Document(page_content=\"Installat...rved.\", metadata={'source': 'https://milvus.io/docs/overview.md', 'title': 'Introduction Milvus documentation', 'description': 'Milvus is an open-source vector database designed specifically for AI application development, embeddings similarity search, and MLOps v2.2.x.', 'language': 'en'}), Document(page_content='Introduction ... Milvus is able to analyze the correlation between two vectors by calculating their similarity distance. If the two embedding vectors are very similar, it means that the original data sources are similar as well.', metadata={'source': 'https://milvus.io/docs/overview.md', 'title': 'Introduction Milvus documentation', 'description': 'Milvus is an open-source vector database designed specifically for AI application development, embeddings similarity search, and MLOps v2.2.x.', 'language': 'en'}), Document(page_content=\"Key concepts\\n...search algorithms are used to accelerate the searching process. If the two embedding vectors are very similar, it means that the original data sources are similar as well.\\nWhy Milvus?\", metadata={'source': 'https://milvus.io/docs/overview.md', 'title': 'Introduction Milvus documentation', 'description': 'Milvus is an open-source vector database designed specifically for AI application development, embeddings similarity search, and MLOps v2.2.x.', 'language': 'en'})]\n","from langchain.chains.qa_with_sources import load_qa_with_sources_chain\nfrom langchain.llms import OpenAI\n\nchain = load_qa_with_sources_chain(OpenAI(temperature=0), chain_type=\"map_reduce\", return_intermediate_steps=True)\nquery = \"What is Milvus?\"\nchain({\"input_documents\": docs, \"question\": query}, return_only_outputs=True)\n","{'intermediate_steps': [' No relevant text.',\n  ' What is Milvus vector database?',\n  '\\nWhat is Milvus? Milvus was created in 2019 with a singular goal: store, index, and manage massive embedding vectors generated by deep neural networks and other machine learning (ML) models. As a database specifically designed to handle queries over input vectors, it is capable of indexing vectors on a trillion scale. Unlike existing relational databases which mainly deal with structured data following a pre-defined pattern, Milvus is designed from the bottom-up to handle embedding vectors converted from unstructured data.',\n  ' Milvus is a vector database and similarity search platform that enables users to quickly and accurately search for semantically similar vectors in an unstructured data repository. It uses modern embedding techniques to convert unstructured data to embedding vectors, and approximate nearest neighbor (ANN) search algorithms to accelerate the searching process.'],\n 'output_text': ' Milvus is a vector database and similarity search platform that enables users to quickly and accurately search for semantically similar vectors in an unstructured data repository. It uses modern embedding techniques to convert unstructured data to embedding vectors, and approximate nearest neighbor (ANN) search algorithms to accelerate the searching process.\\nSOURCES: https://milvus.io/docs/overview.md'}\n"],"headingContent":"","anchorList":[{"label":"Question Answering over Documents with Milvus and LangChain","href":"Question-Answering-over-Documents-with-Milvus-and-LangChain","type":1,"isActive":false},{"label":"Before you begin","href":"Before-you-begin","type":2,"isActive":false},{"label":"Global parameters","href":"Global-parameters","type":2,"isActive":false},{"label":"Prepare data","href":"Prepare-data","type":2,"isActive":false},{"label":"Ask your question","href":"Ask-your-question","type":2,"isActive":false}]}